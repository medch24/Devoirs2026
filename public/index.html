<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-translate="portalTitle">Portail de Suivi des Devoirs</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/locale/fr.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/locale/ar.js"></script>
</head>
<body>

    <div class="container">
        <!-- Vue Principale (Accueil) -->
        <div id="home-view">
            <header class="main-header"><div class="language-selector-home"><button id="lang-fr">FranÃ§ais</button><button id="lang-ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</button></div><h1 data-translate="portalTitle">Portail de Suivi des Devoirs</h1></header>
            <main class="main-menu"><img src="https://lh3.googleusercontent.com/d/1lQ3Babrs3Wgv4rakVmkK0oCWcM0cTKPK" alt="Logo Ã‰cole" id="home-logo"><button id="go-to-parent" class="role-button" data-translate="parentSpace">Espace Parent</button><button id="go-to-teacher" class="role-button" data-translate="teacherSpace">Espace Enseignant</button></main>
        </div>

        <!-- Vue Espace Parent -->
        <div id="parent-selection-view" class="view" style="display: none;">
            <header><button class="back-button">&larr;</button><h1 data-translate="parentSpace">Espace Parent</h1></header>
            <main class="parent-flow-main"><h2 class="section-title" data-translate="classSelectionTitle">1. Choisissez une classe</h2><div id="class-buttons-container" class="class-buttons-container"></div><h2 class="section-title" id="student-selection-title" data-translate="studentSelectionTitle" style="display: none;">2. Choisissez votre enfant</h2><div id="student-grid-container" class="student-grid"></div></main>
        </div>
        
        <!-- Vue Espace Enseignant - Connexion -->
        <div id="teacher-login-view" class="view" style="display: none;">
            <header><button class="back-button">&larr;</button><h1 data-translate="teacherLoginTitle">AccÃ¨s Enseignant</h1></header>
            <main><form id="teacher-login-form" class="login-form"><input type="text" id="username" data-translate-placeholder="usernamePlaceholder" placeholder="Nom d'utilisateur" required><input type="password" id="password" data-translate-placeholder="passwordPlaceholder" placeholder="Mot de passe" required><button type="submit" data-translate="loginButton">Connexion</button><p id="login-error" class="error-message"></p></form></main>
        </div>

        <!-- Vue Tableau de Bord de l'Ã‰lÃ¨ve -->
        <div id="student-dashboard-view" class="view" style="display: none;">
            <header><button class="back-button">&larr;</button><h1 id="student-name-header"></h1></header>
            <main><div class="profile-summary"><div class="student-info"><img src="" alt="Photo Ã©lÃ¨ve" class="student-photo"><div class="star-rating" id="star-rating"></div><div class="student-of-week" id="student-of-week-banner" data-translate="studentOfTheWeek">Ã‰lÃ¨ve de la semaine</div></div><div class="weekly-stats"><h3 class="stat-title">ðŸ“ˆ <span data-translate="overallWeeklyProgress">Progression gÃ©nÃ©rale</span></h3><div class="progress-bar-container"><div class="progress-bar" id="overall-progress-bar"></div><span id="overall-progress-text">0%</span></div></div></div><div class="dashboard-nav"><button id="prev-day-btn" class="nav-arrow">&larr; <span data-translate="previousDay">Jour PrÃ©cÃ©dent</span></button><h2 id="homework-date"></h2><button id="next-day-btn" class="nav-arrow"><span data-translate="nextDay">Jour Suivant</span> &rarr;</button></div><div class="homework-grid" id="homework-grid"></div></main>
        </div>
        
        <!-- Vue Tableau de Bord Enseignant -->
        <div id="teacher-dashboard-view" class="view" style="display: none;">
            <header><button class="back-button">&larr;</button><h1 data-translate="teacherDashboardTitle">Tableau de Bord Enseignant</h1></header>
            <main><div class="upload-section"><h3 class="section-title">ðŸ“… <span data-translate="updateSchedule">Mettre Ã  jour le planning</span></h3><input type="file" id="excel-file-input" accept=".xlsx, .xls, .xlsb, .csv"><button id="upload-excel-btn" class="role-button" data-translate="uploadButton">Charger et Mettre Ã  jour</button><p id="upload-status"></p></div><div class="teacher-main-content"><h2 class="section-title" data-translate="teacherSelectTitle">1. Choisissez votre nom</h2><div id="teacher-icons-container" class="teacher-icons-container"></div><h2 class="section-title" id="homework-cards-title" style="display: none;">2. <span data-translate="homeworkToEvaluate">Choisissez un devoir Ã  Ã©valuer</span></h2><div id="homework-cards-container" class="homework-cards-container"></div><div id="teacher-evaluation-section" style="display: none;"><h2 class="section-title">3. <span data-translate="studentEvaluationTitle">Ã‰valuez les Ã©lÃ¨ves</span></h2><div id="teacher-table-container"></div></div></div></main>
        </div>
    </div>

    <!-- NOUVEAU : FenÃªtre Modale pour la Date de Naissance -->
    <div id="birthday-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h3 data-translate="birthdayModalTitle">VÃ©rification</h3>
            <p data-translate="birthdayPrompt">Veuillez entrer la date de naissance de votre enfant :</p>
            <input type="date" id="birthday-input">
            <p id="birthday-modal-error" class="error-message" style="display: none;"></p>
            <div class="modal-actions">
                <button id="birthday-cancel" class="modal-button secondary" data-translate="cancelButton">Annuler</button>
                <button id="birthday-confirm" class="modal-button primary" data-translate="confirmButton">Confirmer</button>
            </div>
        </div>
    </div>

    <script src="index.js"></script>
</body>
</html>
